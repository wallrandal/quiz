(function(t){function e(e){for(var a,n,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],a=!0,n=1;n<o.length;n++){var i=o[n];0!==r[i]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=o[0]))}return t}var a={},n={app:0},r={app:0},s=[];function i(t){return c.p+"js/"+({"group-portfolio":"group-portfolio","group-stock":"group-stock"}[t]||t)+"."+{"group-portfolio":"89af3804","group-stock":"84678c98"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(t){var e=[],o={"group-stock":1};n[t]?e.push(n[t]):0!==n[t]&&o[t]&&e.push(n[t]=new Promise((function(e,o){for(var a="css/"+({"group-portfolio":"group-portfolio","group-stock":"group-stock"}[t]||t)+"."+{"group-portfolio":"31d6cfe0","group-stock":"deb70f07"}[t]+".css",r=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===r))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===a||l===r)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[t],p.parentNode.removeChild(p),o(s)},p.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){n[t]=0})));var a=r[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,o){a=r[t]=[e,o]}));e.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(p);var o=r[t];if(0!==o){if(o){var a=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,o[1](d)}r[t]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,o){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(o,a,function(e){return t[e]}.bind(null,a));return o},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/quiz/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},1:function(t,e){},"13ad":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);var a={};o.r(a),o.d(a,"loadData",(function(){return at}));o("4de4"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-12"},[o("app-header")],1)]),o("br"),o("br"),o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-12"},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[o("router-view")],1)],1)])])},s=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[o("router-link",{staticClass:"navbar-brand",attrs:{tag:"a",to:"/"}},[t._v(" Minhas Ações ")]),t._m(0),o("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[o("ul",{staticClass:"navbar-nav mr-auto"},[t.logged?o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link",attrs:{to:"/stocks","exact-active-class":"active",exact:""}},[t._v(" Ações ")])],1):t._e(),t.logged?o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link",attrs:{to:"/portfolio","exact-active-class":"active",exact:""}},[t._v(" Portfolio ")])],1):t._e(),t.logged?o("li",{staticClass:"nav-item"},[o("button",{staticClass:"btn btn-primary",on:{click:t.endDay}},[t._v("Finalizar dia")])]):t._e(),t.logged?o("li",{staticClass:"nav-item dropdown open"},[o("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Salvar e carregar ")]),o("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[o("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.saveData}},[t._v("Salvar")]),o("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.loadData}},[t._v("Carregar")])])]):t._e(),t.logged?t._e():o("li",{staticClass:"nav-item"},[o("router-link",{staticClass:"nav-link",attrs:{to:"/login","exact-active-class":"active",exact:""}},[t._v(" Login ")])],1),t.logged?o("li",{staticClass:"nav-item"},[o("a",{staticClass:"nav-link",on:{click:t.logout}},[t._v(" Logout ")])]):t._e()]),o("strong",{staticClass:"navbar-text navbar-right"},[t._v("Patrimônio disponível: "+t._s(t._f("currency")(t.funds)))])])],1)},c=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[o("span",{staticClass:"navbar-toggler-icon"})])}],u=o("5530"),l=o("bc3a"),d=o.n(l),p=d.a.create({baseURL:"https://quiz-3c2c7.firebaseio.com"});p.defaults.headers.common["SOMETHING"]="somethibng",p.interceptors.request.use((function(t){return console.log("custom: "+t),t}));var f=p,m=o("2f62"),g={computed:{funds:function(){return this.$store.getters.funds},logged:function(){return this.$store.getters.isLogged}},methods:Object(u["a"])(Object(u["a"])({},Object(m["b"])({randomizeStocks:"randomizeStocks",fetchData:"loadData"})),{},{endDay:function(){this.randomizeStocks()},saveData:function(){var t={funds:this.$store.getters.funds,stockPortfolio:this.$store.getters.stockPortfolio,stocks:this.$store.getters.funds};f.put("/data.json?auth="+this.$store.getters.token,t).catch((function(t){console.log(t)}))},loadData:function(){this.fetchData(this.$store.getters.token)},logout:function(){this.$store.dispatch("logout")}})},v=g,h=o("2877"),k=Object(h["a"])(v,i,c,!1,null,null,null),b=k.exports,_={components:{AppHeader:b},created:function(){this.$store.dispatch("initStocks"),this.$store.dispatch("tryAutoLogin")}},S=_,I=(o("034f"),Object(h["a"])(S,r,s,!1,null,null,null)),y=I.exports,E=o("8c4f"),C=(o("d3b7"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.logged?o("div",[o("h1",[t._v("Boas vindas, "+t._s(t.email)+" ")]),o("hr"),o("p",[t._v("Patrimônio disponível: "+t._s(t._f("currency")(t.funds)))])]):o("div",[o("h1",[t._v("Boas vindas!")]),o("hr"),o("p",[t._v("Esse é um homebroker de exemplo, desenvolvido por Wall.")]),o("p",[t._v("Faça o login para começar a utilizar a plataforma.")])])])}),w=[],O={computed:{logged:function(){return this.$store.getters.isLogged},email:function(){return!!this.$store.getters.email&&this.$store.getters.email},funds:function(){return this.$store.getters.funds}}},T=O,x=Object(h["a"])(T,C,w,!1,null,null,null),P=x.exports,D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form"},[o("form",[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Cadastre seu e-mail")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"exampleInputEmail1","aria-describedby":"emailHelp"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),o("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Nunca compartilharemos seu e-mail com ninguém")])]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Escolha uma senha")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.saveUser()}}},[t._v("Criar conta")])])])},A=[],j={data:function(){return{email:"",password:""}},methods:{saveUser:function(){var t={email:this.email,password:this.password};this.$store.dispatch("signup",t)}}},L=j,z=(o("fd94"),Object(h["a"])(L,D,A,!1,null,null,null)),N=z.exports,R={idToken:null,userId:null,email:null},U={authUser:function(t,e){t.idToken=e.token,t.userId=e.userId,t.email=e.email},clearAuthData:function(t){t.idToken=null,t.userId=null}},q={setLogoutTimer:function(t,e){var o=t.dispatch;setTimeout((function(){o("logout")}),1e3*e)},signup:function(t,e){var o=t.commit,a=t.dispatch;d.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+Object({VUE_APP_FIREBASE_KEY:"AIzaSyDydaRjIMeNI0M6JPhp3I8g51h90OzIZEs",NODE_ENV:"production",BASE_URL:"/quiz/"}).FIREBASE_KEY,{email:e.email,password:e.password,returnSecureToken:!0}).then((function(t){o("authUser",{token:t.data.idToken,userId:t.data.userId,email:e.email});var n=new Date,r=new Date(n.getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("expirationDate",r),localStorage.setItem("userId",t.data.localId),localStorage.setItem("email",e.email),a("storeUser",e),a("setLogoutTimer",t.data.expiresIn)})).catch((function(t){return console.log(t)}))},login:function(t,e){var o=t.commit,a=t.dispatch,n="undefined"!=typeof Object({VUE_APP_FIREBASE_KEY:"AIzaSyDydaRjIMeNI0M6JPhp3I8g51h90OzIZEs",NODE_ENV:"production",BASE_URL:"/quiz/"}).FIREBASE_KEY?Object({VUE_APP_FIREBASE_KEY:"AIzaSyDydaRjIMeNI0M6JPhp3I8g51h90OzIZEs",NODE_ENV:"production",BASE_URL:"/quiz/"}).FIREBASE_KEY:"AIzaSyDydaRjIMeNI0M6JPhp3I8g51h90OzIZEs";d.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(n),{email:e.email,password:e.password,returnSecureToken:!0}).then((function(t){o("authUser",{token:t.data.idToken,userId:t.data.userId,email:e.email});var n=new Date,r=new Date(n.getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("expirationDate",r),localStorage.setItem("userId",t.data.localId),localStorage.setItem("email",e.email),a("setLogoutTimer",t.data.expiresIn)})).catch((function(t){return console.log(t)}))},tryAutoLogin:function(t){var e=t.commit,o=localStorage.getItem("token");if(o){var a=localStorage.getItem("expirationDate"),n=new Date;if(!(n>=a)){var r=localStorage.getItem("userId"),s=localStorage.getItem("email");e("authUser",{token:o,userId:r,email:s})}}},storeUser:function(t,e){t.commit;d.a.post("/users.json",e).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},fetchUser:function(t){t.commit;d.a.get("/users.json").then((function(t){var e=t.data,o=[];for(var a in e){var n=e[a];n.id=a,o.push(n)}})).catch((function(t){return console.log(t)}))},logout:function(t){var e=t.commit;e("clearAuthData"),localStorage.removeItem("expirationDate"),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("email")}},$={email:function(t){return t.email},token:function(t){return t.idToken},isLogged:function(){return null!=R.idToken}},B={state:R,mutations:U,getters:$,actions:q},M=function(){return o.e("group-portfolio").then(o.bind(null,"7572"))},K=function(){return o.e("group-stock").then(o.bind(null,"8f2b"))},F=function(){return o.e("group-stock").then(o.bind(null,"b461"))},Y=[{path:"/",component:P},{path:"/portfolio",component:M,beforeEnter:function(t,e,o){B.state.user?o():o("/login")}},{path:"/stocks",component:K},{path:"/login",component:F},{path:"/signup",component:N}],J=(o("7db0"),o("c975"),o("d81d"),o("a434"),o("b0c0"),{funds:1e3,stocks:[]}),V={BUY_STOCK:function(t,e){var o=e.stockId,a=e.quantity,n=e.stockPrice,r=t.stocks.find((function(t){return t.id==o}));r?r.quantity+=a:t.stocks.push({id:o,quantity:a}),t.funds-=n*a},SELL_STOCK:function(t,e){var o=e.stockId,a=e.quantity,n=e.stockPrice,r=t.stocks.find((function(t){return t.id==o}));r.quantity>a?r.quantity-=a:t.stocks.splice(t.stocks.indexOf(r),1),t.funds+=n*a},SET_PORTFOLIO:function(t,e){t.funds=e.funds,t.stocks=e.stockPortfolio?e.stockPortfolio:[1]}},H={sellStock:function(t,e){var o=t.commit;o("SELL_STOCK",e)}},Z={stockPortfolio:function(t,e){return t.stocks.map((function(t){var o,a=e.stocks.find((function(e){return e.id===t.id}));if("undefined"!=typeof a)return{id:t.id,quantity:t.quantity,name:null!==(o=a.name)&&void 0!==o?o:"",price:a.price}}))},funds:function(t){return t.funds}},W={state:J,mutations:V,getters:Z,actions:H},G=(o("4160"),o("159b"),[{id:1,name:"Magazine Luiza",price:82},{id:2,name:"Itaú",price:27},{id:3,name:"Azul",price:21},{id:4,name:"Natura",price:42}]),Q={stocks:[]},X={SET_STOCKS:function(t){t.stocks=G},RND_STOCKS:function(t){t.stocks.forEach((function(t){t.price=Math.round(t.price*(1+Math.random()-.5))}))}},tt={buyStock:function(t,e){var o=t.commit;o("BUY_STOCK",e)},initStocks:function(t){var e=t.commit;e("SET_STOCKS")},randomizeStocks:function(t){var e=t.commit;e("RND_STOCKS")}},et={stocks:function(t){return t.stocks}},ot={state:Q,mutations:X,getters:et,actions:tt},at=function(t,e){var o=t.commit;d.a.get("/data.json?auth="+e).then((function(t){if(t.data){var e=t.data.stocks,a=t.data.funds,n=t.data.stockPortfolio,r={stocks:e,stockPortfolio:n,funds:a};o("SET_STOCKS",e),o("SET_PORTFOLIO",r)}}))};n["a"].use(m["a"]);var nt=new m["a"].Store({actions:a,modules:{stocks:ot,portfolio:W,auth:B}}),rt=o("28dd");d.a.defaults.baseURL="https://quiz-3c2c7.firebaseio.com",d.a.interceptors.request.use((function(t){return console.log("request intecteptor: "+t),t})),d.a.interceptors.response.use((function(t){return console.log("response intecteptor: "+t),t})),n["a"].use(m["a"]),n["a"].use(E["a"]),n["a"].use(rt["a"]),n["a"].http.options.root="https://quiz-3c2c7.firebaseio.com/",n["a"].filter("currency",(function(t){return t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}));var st=new E["a"]({routes:Y});new n["a"]({el:"#app",router:st,store:nt,render:function(t){return t(y)}})},"85ec":function(t,e,o){},fd94:function(t,e,o){"use strict";o("13ad")}});
//# sourceMappingURL=app.cc297732.js.map